<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BARBAR ‚Äî Platform Belajar Masa Depan</title>
  
  <!-- Preconnect untuk Performa Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <style>
    /* =========================================
       CSS (DESAIN ORIGINAL & MODERN)
       ========================================= */
    :root {
      --primary-bg: #0F0F1A;
      --secondary-bg: #1B1B2B;
      --accent: #7F5AF0;
      --accent-secondary: #2CB67D;
      --text-primary: #FFFFFE;
      --text-secondary: #94A1B2;
      --border-color: rgba(127, 90, 240, 0.2);
      --shadow-color: rgba(0, 0, 0, 0.2);
      --header-height: 64px;
      --green: #2CB67D;
      --red: #EF4444;
      --yellow: #FBBF24;
      font-family: 'Manrope', system-ui, sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    @keyframes slow-pulse {
      0%, 100% { transform: scale(1); opacity: 0.1; }
      50% { transform: scale(1.5); opacity: 0.2; }
    }

    body {
      background-color: var(--primary-bg);
      color: var(--text-primary);
      padding-top: calc(var(--header-height) + 32px);
      overflow-x: hidden;
      position: relative;
    }

    /* Splash Screen */
    .splash-screen {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background-color: var(--primary-bg);
        display: flex; justify-content: center; align-items: center;
        z-index: 9999; flex-direction: column;
        transition: opacity 0.8s ease-out, visibility 0.8s ease-out;
    }
    .splash-screen.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
    .splash-logo { display: flex; align-items: center; gap: 4px; animation: splash-fade-in 1s ease-out; }
    .splash-logo h1 { font-size: 48px; }
    @keyframes splash-fade-in { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

    /* Background FX */
    body::before, body::after {
      content: ''; position: fixed; border-radius: 50%;
      background: var(--accent); filter: blur(150px); z-index: -1;
      animation: slow-pulse 20s infinite ease-in-out;
    }
    body::before { width: 300px; height: 300px; top: -100px; left: -100px; }
    body::after { width: 400px; height: 400px; bottom: -150px; right: -150px; animation-delay: 5s; }

    /* Layout */
    .page-container { width: 100%; }
    .page { display: none; padding: 24px; max-width: 1200px; margin: 0 auto; animation: fadeIn 0.5s ease-out; }
    .page.active { display: block; }
    .page-subtitle { color: var(--text-secondary); margin-top: 4px; max-width: 600px; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .container-app { display: grid; grid-template-columns: 1fr 340px; gap: 24px; }
    .left, .sidebar { display: flex; flex-direction: column; gap: 24px; }

    /* Header Floating Gelembung */
    .app-header {
      position: fixed; top: 16px; left: 50%; transform: translateX(-50%);
      width: calc(100% - 32px); max-width: 1200px; height: var(--header-height);
      background: rgba(27, 27, 43, 0.75); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
      z-index: 100; padding: 0 24px; display: flex; align-items: center; justify-content: space-between;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 32px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: all 0.3s ease;
    }
    .header-left { display: flex; align-items: center; gap: 12px; }
    .header-title-group { display: flex; align-items: center; gap: 8px; }
    h1 { font-size: 22px; font-weight: 800; color: var(--text-primary); margin-left: 4px; }

    /* Profil di Header Kanan */
    .header-right { display: flex; align-items: center; }
    .header-profile-pic {
        width: 40px; height: 40px; border-radius: 50%; object-fit: cover;
        border: 2px solid var(--accent); cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        display: none; 
    }
    .header-profile-pic:hover { transform: scale(1.1); box-shadow: 0 0 15px var(--accent); }

    /* Tombol Hamburger Animasi */
    .hamburger-btn { 
      background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); 
      cursor: pointer; width: 40px; height: 40px; border-radius: 50%; z-index: 110; 
      display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 4px; 
      transition: all 0.3s ease;
    }
    .hamburger-btn:hover { background: var(--accent); border-color: var(--accent); }
    .hamburger-btn span { 
      display: block; width: 18px; height: 2px; background-color: var(--text-primary); 
      transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); 
    }
    .hamburger-btn.is-active span:nth-child(1) { transform: translateY(6px) rotate(45deg); }
    .hamburger-btn.is-active span:nth-child(2) { opacity: 0; transform: scale(0); }
    .hamburger-btn.is-active span:nth-child(3) { transform: translateY(-6px) rotate(-45deg); }

    /* Sidebar */
    .sidebar-nav {
      position: fixed; top: 0; left: 0; width: 280px; height: 100%;
      background: var(--secondary-bg); box-shadow: 4px 0 20px var(--shadow-color);
      transform: translateX(-100%); transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
      z-index: 105; padding: calc(var(--header-height) + 24px) 24px 24px;
      display: flex; flex-direction: column; gap: 8px; border-right: 1px solid var(--border-color);
    }
    .sidebar-nav.open { transform: translateX(0); }
    .sidebar-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0, 0, 0, 0.6); z-index: 104; display: none; opacity: 0; transition: opacity 0.4s;
    }
    .sidebar-nav.open ~ .sidebar-overlay { display: block; opacity: 1; }

    .welcome-user { padding-bottom: 16px; margin-bottom: 16px; border-bottom: 1px solid var(--border-color); color: var(--text-secondary); display: flex; align-items: center; gap: 12px; }
    .welcome-user img { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid var(--accent); }
    
    .nav-link {
      padding: 12px 16px; text-decoration: none; color: var(--text-secondary); font-weight: 500; border-radius: 8px; 
      display: flex; align-items: center; gap: 12px; transition: background-color 0.2s, color 0.2s;
    }
    .nav-link:hover { background-color: var(--primary-bg); color: var(--text-primary); }
    .nav-link.active { background-color: var(--accent); color: white; font-weight: 600; }

    /* Components */
    .card { background-color: var(--secondary-bg); border-radius: 12px; padding: 24px; border: 1px solid var(--border-color); box-shadow: 0 4px 20px var(--shadow-color); }
    .card-header { font-weight: 600; font-size: 16px; padding-bottom: 12px; margin-bottom: 12px; border-bottom: 1px solid var(--border-color); }
    .scrollable-content { overflow-y: auto; max-height: 200px; }

    .leaderboard-entry { padding: 8px 0; border-bottom: 1px dashed rgba(255, 255, 255, 0.05); display: flex; justify-content: space-between; align-items: center; }
    .leaderboard-entry strong { font-weight: 600; }
    .leaderboard-entry.current-user { background: rgba(127, 90, 240, 0.1); padding: 8px 8px; border-radius: 6px; border-bottom: none; }

    /* Landing & Onboarding */
    .landing-content { min-height: calc(100vh - var(--header-height) - 48px); display: flex; align-items: center; justify-content: center; text-align: center; }
    .landing-text { max-width: 550px; display: flex; flex-direction: column; align-items: center; }
    .landing-text h2 { font-size: 48px; font-weight: 800; line-height: 1.2; }
    .landing-text .highlight { color: var(--accent); }
    .landing-text p { font-size: 18px; color: var(--text-secondary); margin: 16px 0 32px; }
    .landing-input-group { display: flex; gap: 8px; flex-direction: column; align-items: center; width: 100%; }
    .landing-input-group button { width: 100%; max-width: 300px; display: flex; justify-content: center; align-items: center; gap: 12px; padding: 14px 20px; font-size: 16px; }

    /* Home */
    .home-hero { text-align: center; padding: 48px 0; }
    .home-hero h3 { font-size: 32px; font-weight: 700; margin-bottom: 8px; }
    .home-hero p { color: var(--text-secondary); max-width: 600px; margin: auto; }
    .founder-section { margin-top: 48px; text-align: center; }
    .founder-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; max-width: 600px; margin: auto; }
    .founder-card { position: relative; }
    .founder-photo { width: 150px; height: 150px; margin: auto; border-radius: 50%; overflow: hidden; border: 4px solid var(--secondary-bg); box-shadow: 0 0 0 2px var(--accent); position: relative; z-index: 2; }
    .founder-photo img { width: 100%; height: 100%; object-fit: cover; }
    .founder-shape { width: 150px; height: 150px; background: var(--accent); border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(15deg); opacity: 0.2; z-index: 1; }

    /* Selection */
    h2 { font-size: 28px; font-weight: 700; }
    .selection-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 24px; }
    .selection-card { background-color: var(--secondary-bg); padding: 24px; border-radius: 12px; border: 1px solid var(--border-color); text-decoration: none; color: var(--text-primary); transition: all 0.3s; cursor: pointer; }
    .selection-card:hover { transform: translateY(-5px) scale(1.02); border-color: var(--accent); box-shadow: 0 8px 30px rgba(127, 90, 240, 0.2); }

    /* Video & Quiz */
    .video-container { position: relative; width: 100%; padding-top: 56.25%; background-color: #000; border-radius: 8px; overflow: hidden; }
    .video-container video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    
    @keyframes slideInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .question-text { animation: slideInUp 0.4s ease-out; }
    .options { animation: slideInUp 0.4s ease-out 0.1s; animation-fill-mode: backwards; }
    .option.correct { background-color: var(--green) !important; color: white !important; border-color: var(--green) !important; }
    .option.wrong { background-color: var(--red) !important; color: white !important; border-color: var(--red) !important; animation: shake 0.5s; }
    @keyframes shake { 10%, 90% { transform: translateX(-1px); } 20%, 80% { transform: translateX(2px); } 30%, 50%, 70% { transform: translateX(-4px); } 40%, 60% { transform: translateX(4px); } }

    /* Mentor */
    .mentor-page-container { height: calc(100vh - var(--header-height) - 48px); display: flex; flex-direction: column; max-width: 800px; margin: auto; }
    .mentor-log-full { flex-grow: 1; overflow-y: auto; padding: 16px; background: var(--primary-bg); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 16px; display: flex; flex-direction: column; }
    .msg { padding: 10px 14px; border-radius: 12px; margin-bottom: 10px; max-width: 80%; line-height: 1.5; }
    .msg.ai { background: var(--secondary-bg); align-self: flex-start; }
    .msg.user { background: var(--accent); color: white; align-self: flex-end; }
    .mentor-input-full { display: flex; gap: 8px; }

    /* Feedback */
    .feedback-container { max-width: 600px; margin: 32px auto; display: flex; flex-direction: column; gap: 24px; }
    .feedback-wrapper { text-align: center; gap: 16px; }
    .star-rating { display: flex; justify-content: center; gap: 8px; font-size: 32px; cursor: pointer; }
    .star-rating .star { color: var(--text-secondary); transition: all 0.2s; line-height: 1; }
    .star-rating .star:hover, .star-rating .star.selected { color: var(--yellow); transform: scale(1.15); }

    /* Modal Styling untuk Profil */
    .modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.6); backdrop-filter: blur(4px);
        z-index: 900; display: none; justify-content: center; align-items: center;
        opacity: 0; transition: opacity 0.3s;
    }
    .modal-overlay.show { opacity: 1; display: flex; }
    .modal-card {
        background: var(--secondary-bg); border: 1px solid var(--border-color);
        padding: 32px; border-radius: 16px; width: 90%; max-width: 400px;
        text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        transform: translateY(20px); transition: transform 0.3s;
    }
    .modal-overlay.show .modal-card { transform: translateY(0); }

    /* Buttons */
    .btn { background: var(--secondary-bg); border: 1px solid var(--border-color); padding: 10px 16px; border-radius: 8px; cursor: pointer; color: var(--text-primary); font-weight: 500; font-family: inherit; font-size: 14px; text-decoration: none; transition: all 0.2s ease; }
    .btn:hover { border-color: var(--accent); color: var(--accent); }
    .accent-btn { background: var(--text-primary); color: var(--primary-bg); border-color: var(--text-primary); font-weight: 700; }
    .accent-btn:hover { background: #E2E8F0; border-color: #E2E8F0; color: var(--primary-bg); transform: translateY(-2px); box-shadow: 0 4px 15px rgba(255,255,255,0.1); }
    
    input, textarea { width: 100%; padding: 12px 16px; border-radius: 8px; border: 1px solid var(--border-color); background: var(--primary-bg); color: var(--text-primary); font-size: 14px; font-family: inherit; margin-bottom: 12px;}
    input:focus, textarea:focus { outline: 2px solid var(--accent); border-color: transparent; }

    /* Notification */
    .notification { position: fixed; top: calc(var(--header-height) + 16px); left: 50%; transform: translateX(-50%) translateY(-100px); background-color: var(--accent); color: white; padding: 12px 24px; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); z-index: 200; transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.3s ease-out; opacity: 0; }
    .notification.show { transform: translateX(-50%) translateY(0); opacity: 1; }

    /* Responsive */
    @media (max-width: 900px) { .container-app { grid-template-columns: 1fr; } .sidebar { order: -1; } }
    @media (max-width: 768px) { .page { padding: 16px; } .app-header { padding: 0 16px; } .landing-text h2 { font-size: 36px; } .home-hero h3 { font-size: 28px; } .founder-grid { grid-template-columns: 1fr; } .selection-grid { grid-template-columns: 1fr; } }
    @media (max-width: 480px) { .landing-text h2 { font-size: 32px; } .card { padding: 16px; } }
  </style>
</head>
<body>
  
  <!-- Splash Screen -->
  <div id="splashScreen" class="splash-screen">
    <div class="splash-logo">
      <img class="header-logo" width="48" height="48" alt="Logo" src="https://res.cloudinary.com/dgzufaone/image/upload/v1761143718/Gemini_Generated_Image_hbfzexhbfzexhbfz-modified_rcnbja.png" />
      <h1>BARBAR</h1>
    </div>
  </div>

  <div id="notification" class="notification"></div>

  <!-- Modal Pengaturan Profil -->
  <div id="profileModal" class="modal-overlay">
    <div class="modal-card">
        <h3>Pengaturan Profil</h3>
        <p class="small" style="color: var(--text-secondary); margin-bottom: 20px;">Ubah nama tampilan Anda.</p>
        <img id="modalProfilePic" src="https://via.placeholder.com/80" alt="Foto Profil" style="width: 80px; height: 80px; border-radius: 50%; border: 2px solid var(--accent); margin-bottom: 16px;">
        <input id="editNameInput" type="text" placeholder="Masukkan nama panggilan baru..." />
        <div style="display: flex; gap: 8px; margin-top: 16px;">
            <button id="closeProfileBtn" class="btn" style="flex: 1;">Batal</button>
            <button id="saveProfileBtn" class="btn accent-btn" style="flex: 1; background: var(--accent); color: white; border-color: var(--accent);">Simpan</button>
        </div>
    </div>
  </div>

  <!-- Header -->
  <header class="app-header">
    <div class="header-left">
      <button id="hamburgerBtn" class="hamburger-btn"><span></span><span></span><span></span></button>
      <div class="header-title-group">
        <img class="header-logo" width="32" height="32" alt="Logo Kecil" src="https://res.cloudinary.com/dgzufaone/image/upload/v1761143718/Gemini_Generated_Image_hbfzexhbfzexhbfz-modified_rcnbja.png" />
        <h1>BARBAR</h1>
      </div>
    </div>
    <div class="header-right">
      <img id="headerProfilePic" class="header-profile-pic" src="https://via.placeholder.com/40" alt="Profil">
    </div>
  </header>

  <!-- Sidebar Menu -->
  <nav id="sidebar" class="sidebar-nav">
    <div id="welcomeUser" class="welcome-user" style="display: none;">
      <img id="userPhotoDisplay" src="https://via.placeholder.com/40" alt="User Photo">
      <div>
        <div style="font-size: 12px; color: var(--accent);">Selamat Datang,</div>
        <strong id="userNameDisplay"></strong>
      </div>
    </div>
    <a href="#home" class="nav-link" data-page="homePage">üè† Beranda</a>
    <a href="#belajar" class="nav-link" data-page="subjectSelectionPage">üìö Mulai Belajar</a>
    <a href="#mentor" class="nav-link" data-page="aiMentorPage">ü§ñ AI Mentor</a>
    <a href="https://udinndinn49-debug.github.io/Forum-pembahasan/ " target="_blank" class="nav-link">üí¨ Forum Diskusi</a>
    <a href="#feedback" class="nav-link" data-page="feedbackPage">‚≠ê Beri Penilaian</a>
    <a href="#fitur" id="fiturTambahanBtn" class="nav-link">‚ú® Fitur Tambahan</a>
    <a href="#" id="logoutBtn" class="nav-link" style="margin-top: auto; color: var(--red);">üö™ Keluar Akun</a>
  </nav>
  
  <div id="sidebarOverlay" class="sidebar-overlay"></div>

  <!-- Main Content Container -->
  <div id="pageContainer" class="page-container">
    
    <!-- 1. Halaman Autentikasi (Landing Page) -->
    <div id="landingPage" class="page active">
      <div class="landing-content">
        <div class="landing-text">
          <h2>Mulai Belajar di <br><span class="highlight">BARBAR ACADEMY</span></h2>
          <p>Platform microlearning revolusioner. Masuk sekarang untuk menyimpan progres belajarmu secara otomatis di cloud.</p>
          <div class="landing-input-group">
            <button id="loginGoogleBtn" class="btn accent-btn animated-btn">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24px" height="24px">
                <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/>
                <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/>
                <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/>
                <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"/>
              </svg>
              <span>Lanjutkan dengan Google</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 2. Halaman Set Nama (Setelah Login Google) -->
    <div id="setNamePage" class="page">
      <div class="landing-content">
        <div class="landing-text">
          <h2>Satu Langkah Lagi!</h2>
          <p>Masukkan nama panggilan yang ingin Anda gunakan di Papan Peringkat BARBAR.</p>
          <div class="landing-input-group">
            <input id="onboardNameInput" type="text" placeholder="Ketik nama panggilan Anda..." />
            <button id="saveOnboardNameBtn" class="btn accent-btn animated-btn" style="background:var(--accent); color:white; border-color:var(--accent);"><span>Mulai Belajar</span></button>
          </div>
        </div>
      </div>
    </div>

    <!-- 3. Halaman Home -->
    <div id="homePage" class="page">
      <div class="home-hero">
        <h3>Selamat Datang di Dashboard</h3>
        <p>Lanjutkan progres belajarmu hari ini. Mau mulai belajar materi baru atau sapa AI Mentor?</p>
      </div>
      
      <!-- Tombol Akses Cepat di Beranda -->
      <div class="selection-grid" style="margin-bottom: 48px;">
         <div class="selection-card" onclick="document.querySelector('[data-page=subjectSelectionPage]').click()">
             <h4 style="font-size: 20px;">üìö Mulai Belajar</h4>
             <p>Akses semua video materi dan selesaikan kuis interaktifnya.</p>
         </div>
         <div class="selection-card" onclick="document.querySelector('[data-page=aiMentorPage]').click()">
             <h4 style="font-size: 20px;">ü§ñ Tanya AI Mentor</h4>
             <p>Punya PR sulit? Tanyakan langsung pada Asisten Cerdas kami.</p>
         </div>
      </div>

      <div class="founder-section">
        <h3 style="font-size: 24px; margin-bottom: 24px;">Tim Pengembang</h3>
        <div class="founder-grid">
          <div class="founder-card"><div class="founder-photo"><img src="https://res.cloudinary.com/dgzufaone/image/upload/v1761118376/Gemini_Generated_Image_jxmjhwjxmjhwjxmj_ixh88x.jpg" alt="Zulfa"></div><div class="founder-shape"></div><h4>Zulfa Fahmiy</h4><p>CEO</p></div>
          <div class="founder-card"><div class="founder-photo"><img src="https://res.cloudinary.com/dgzufaone/image/upload/v1761119341/1000087641_pra_re9gau.png" alt="Prabu"></div><div class="founder-shape"></div><h4>Prabu Revolusi</h4><p>CTO</p></div>
        </div>
      </div>
    </div>
    
    <!-- 4. Pilihan Mata Pelajaran -->
    <div id="subjectSelectionPage" class="page">
        <h2>Pilih Mata Pelajaran</h2>
        <p class="page-subtitle">Pilih salah satu mata pelajaran untuk melihat topik yang tersedia.</p>
        <div id="subjectGrid" class="selection-grid"></div>
    </div>

    <!-- 5. Pilihan Topik -->
    <div id="topicSelectionPage" class="page">
        <button id="backToSubjectsBtn" class="btn back-btn">‚Üê Kembali ke Mata Pelajaran</button>
        <h2 id="topicSelectionTitle" style="margin-top: 16px;">Pilih Topik</h2>
        <p class="page-subtitle">Topik dirancang untuk dipelajari dalam 5 menit.</p>
        <div id="topicGrid" class="selection-grid"></div>
    </div>

    <!-- 6. Aplikasi Pembelajaran (Video & Kuis) -->
    <div id="appPage" class="page">
      <div class="container-app">
        <main class="left">
          <div class="card video-card">
             <div class="video-container"><video id="topicVideo" controls preload="metadata"><source src="" type="video/mp4"></video></div>
            <div class="video-info-wrapper" style="margin-top: 16px; display: flex; justify-content: space-between; align-items: flex-start;">
              <div class="topic-details">
                <h3 id="topicTitle">-</h3>
                <p class="small">Timer: <span class="timer" id="sessTimer" style="font-family: monospace; font-weight: bold;">05:00</span></p>
              </div>
              <div class="topic-controls" style="flex-grow: 1; margin-left: 20px;">
                  <div class="progress-line" style="height: 6px; background: #333; border-radius: 3px; overflow: hidden; margin-bottom: 8px;">
                      <div id="progBar" style="height: 100%; width: 0%; background: var(--accent); transition: width 0.3s;"></div>
                  </div>
                  <div class="controls" style="text-align: right;"><button class="btn accent-btn" style="background:var(--accent); color:white; border-color:var(--accent);" id="startSession">Mulai Sesi</button></div>
              </div>
            </div>
          </div>
          
          <div class="card quiz" id="quizArea" style="display:none">
            <div id="quizHeader" style="display: flex; justify-content: space-between; margin-bottom: 16px;">
              <h4>Kuis Singkat</h4>
              <p class="small">Sisa: <span id="remainingQ">0</span></p>
            </div>
            <div id="questionWrap"></div>
            <div class="quiz-controls" style="margin-top: 16px; text-align: right;"><button class="btn" id="endSession" style="display:none">Akhiri Sesi</button></div>
          </div>
        </main>
        
        <aside class="sidebar">
          <div class="card">
            <div class="card-header">Statistik Saya</div>
            <div class="stats-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
              <div><p class="small">Selesai</p><strong id="doneTopics" style="font-size: 20px; color: var(--green);">0</strong></div>
              <div><p class="small">Poin</p><strong id="totalPoints" style="font-size: 20px; color: var(--yellow);">0</strong></div>
            </div>
          </div>
          <div class="card">
            <div class="card-header">üèÜ Papan Peringkat (Global)</div>
            <div id="leaderboard" class="scrollable-content"></div>
          </div>
        </aside>
      </div>
    </div>
    
    <!-- 7. AI Mentor -->
    <div id="aiMentorPage" class="page">
        <h2>AI Mentor</h2>
        <p class="page-subtitle">Tanyakan pada mentor AI kami.</p>
        <div class="mentor-page-container card">
            <div id="mentorLog" class="mentor-log-full"><div class="msg ai">Halo! Saya adalah mentor AI Anda.</div></div>
            <div class="mentor-input-full"><input id="mentorInput" type="text" placeholder="Tanya Mentor..." /><button class="btn accent-btn" style="background:var(--accent); color:white; border-color:var(--accent);" id="sendMentor">Kirim</button></div>
        </div>
    </div>

    <!-- 8. Feedback -->
    <div id="feedbackPage" class="page">
      <div class="feedback-container">
        <div class="card feedback-wrapper">
          <h3>Beri Penilaian Anda</h3>
          <div class="star-rating" id="starRating">
              <span class="star" data-value="1">‚òÜ</span><span class="star" data-value="2">‚òÜ</span><span class="star" data-value="3">‚òÜ</span><span class="star" data-value="4">‚òÜ</span><span class="star" data-value="5">‚òÜ</span>
          </div>
          <textarea id="feedbackText" placeholder="Saran Anda..." style="min-height: 100px; resize: vertical; margin-top: 10px;"></textarea>
          <button id="submitFeedback" class="btn accent-btn animated-btn" style="background:var(--accent); color:white; border-color:var(--accent);"><span>Kirim Feedback</span></button>
          <p id="feedbackThanks" class="small" style="display:none; color: var(--green); font-weight: 600; margin-top: 16px;">Terima kasih!</p>
        </div>
      </div>
    </div>

  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  
  <!-- =========================================
     FIREBASE & LOGIC
     ========================================= -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
    import { getFirestore, collection, addDoc, getDocs, setDoc, getDoc, doc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

    // ======================================================================
    // üî¥ TEMPAT KONFIGURASI FIREBASE ANDA DI SINI üî¥
    // ======================================================================
    const firebaseConfig = {
  apiKey: "AIzaSyCuIGFVtjoCTKtTnAu6gpw0husjyHk82hM",
  authDomain: "barbar-academy-8998b.firebaseapp.com",
  projectId: "barbar-academy-8998b",
  storageBucket: "barbar-academy-8998b.firebasestorage.app",
  messagingSenderId: "898070650609",
  appId: "1:898070650609:web:de9c0cf35e316403d95350"
};

    // 1. SETUP FIREBASE
    let db = null;
    let auth = null;
    let appId = 'barbar-app';
    let currentUser = null;
    const provider = new GoogleAuthProvider(); 

    try {
        let finalConfig = firebaseConfig;
        if (typeof __firebase_config !== 'undefined') {
            finalConfig = JSON.parse(__firebase_config);
            appId = typeof __app_id !== 'undefined' ? __app_id : 'barbar-app';
        }
        if (finalConfig.apiKey && finalConfig.apiKey !== "ISI_DENGAN_API_KEY_ANDA") {
            const app = initializeApp(finalConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase initialized.");
        }
    } catch (e) {
        console.warn("Firebase config not found (Offline Mode).", e);
    }

    // 2. DATA STATIC LENGKAP
    const SUBJECTS_DATA = {
      "Biologi": [
        { id: "b1", title: "Sistem Pencernaan", video: "https://res.cloudinary.com/dgzufaone/video/upload/v1760703550/Belajar_IPA_Sistem_Pencernaan_Manusia_SiapNaikLevel_fnur0d.mp4", description: "Video: organ & proses pencernaan (‚â§3 menit).", questions: [
          { id: "b1q1", q: "Proses memecah makanan secara kimiawi pertama kali terjadi di?", opts:["Lambung","Mulut","Usus Halus"], a:1 },
          { id: "b1q2", q: "Organ yang menyerap sebagian besar nutrisi adalah?", opts:["Usus Besar","Usus Halus","Lambung"], a:1 },
          { id: "b1q3", q: "Enzim yang memulai pencernaan karbohidrat di mulut adalah?", opts:["Lipase","Pepsin","Amilase"], a:2 }
        ] },
        { id: "b2", title: "Sirkulasi Darah", video: "https://res.cloudinary.com/dgzufaone/video/upload/v1760709823/barbar/Apa_yang_terjadi_di_dalam_tubuh_saat_darah_mengalir__-_Belajar_IPA_cj8b2r.mp4", description: "Sirkulasi darah ringkas (‚â§3 menit).", questions: [
          { id: "b2q1", q: "Bagian darah yang berperan dalam pembekuan darah?", opts:["Eritrosit","Leukosit","Trombosit"], a:2 },
          { id: "b2q2", q: "Pembuluh yang membawa darah kaya oksigen dari paru-paru ke jantung?", opts:["Vena Kava","Arteri Pulmonalis","Vena Pulmonalis"], a:2 }
        ] }
      ],
      "Matematika": [
        { id: "m1", title: "Konsep Pecahan", video: "https://res.cloudinary.com/dgzufaone/video/upload/v1760751491/barbar/Pecahan_-_Animasi_Matematika_SD_n2roxi.mp4", description: "Apa itu pembilang dan penyebut?", questions: [
          { id: "m1q1", q: "Berapakah hasil dari 1/2 + 1/4?", opts:["2/6","3/4","1/3"], a:1 },
          { id: "m1q2", q: "Angka di bagian bawah pecahan disebut?", opts:["Pembilang","Penyebut","Koefisien"], a:1 }
        ] },
        { id: "m2", title: "Teorema Pythagoras", video: "https://res.cloudinary.com/dgzufaone/video/upload/v1761116900/Teorema_Pythagoras_dan_Pembuktian_dengan_Animasi_arpdtu.mp4", description: "Mencari sisi miring segitiga siku-siku.", questions: [
          { id: "m2q1", q: "Rumus Teorema Pythagoras untuk sisi miring (c) adalah?", opts:["a¬≤ + b¬≤ = c¬≤","a¬≤ - b¬≤ = c¬≤","a + b = c"], a:0 },
          { id: "m2q2", q: "Jika a=3 dan b=4, maka panjang sisi miring c adalah?", opts:["5","7","25"], a:0 }
        ] }
      ],
      "Ekonomi": [
        { id: "e1", title: "Permintaan & Penawaran", video: "https://res.cloudinary.com/dgzufaone/video/upload/v1760750374/introduction-to-supply-and-demand_PwrjcZaP_x6tsu1.mp4", description: "Mengenal kurva D dan S (‚â§3 menit).", questions: [
          { id: "e1q1", q: "Jika harga barang naik, maka jumlah barang yang diminta cenderung...", opts:["Naik","Tetap","Turun"], a:2 },
          { id: "e1q2", q: "Titik pertemuan kurva permintaan dan penawaran disebut?", opts:["Harga Maksimum","Keseimbangan Pasar","Titik Impas"], a:1 }
        ] }
      ]
    };

    // 3. STATE APLIKASI
    const appState = {
      subjects: SUBJECTS_DATA,
      currentSubject: null,
      currentTopicIndex: null,
      sessionSeconds: 300,
      timerHandle: null,
      remainingSeconds: 300,
      quizQueue: [],
      points: 0,
      completed: {},
      userName: '',
      userPhoto: 'https://via.placeholder.com/40',
      currentRating: 0,
    };

    // 4. ELEMEN UI (Helper)
    const ui = {
        get: (id) => document.getElementById(id),
        getAll: (sel) => document.querySelectorAll(sel),
        showPage: (pageId) => {
            ui.getAll('.page').forEach(p => p.classList.remove('active'));
            ui.get(pageId)?.classList.add('active');
            ui.getAll('.nav-link').forEach(l => l.classList.toggle('active', l.dataset.page === pageId));
            ui.get('sidebar').classList.remove('open');
            ui.get('hamburgerBtn').classList.remove('is-active');
        }
    };

    // --- FUNGSI UPDATE TAMPILAN PROFIL ---
    function updateUIWithUser() {
        ui.get('userNameDisplay').textContent = appState.userName;
        ui.get('userPhotoDisplay').src = appState.userPhoto;
        ui.get('headerProfilePic').src = appState.userPhoto;
        
        ui.get('welcomeUser').style.display = 'flex';
        ui.get('headerProfilePic').style.display = 'block';
    }

    // 5. FUNGSI UTAMA & AUTHENTICATION STATE
    async function init() {
        console.log("App Starting...");
        loadLocalState();
        renderSubjects(); // <-- Render Mata Pelajaran di Awal agar tidak kosong
        setupEventListeners();
        setupStarRating();

        if (auth) {
            onAuthStateChanged(auth, async (user) => {
                ui.get('splashScreen').classList.add('hidden');
                
                if (user) {
                    currentUser = user;
                    appState.userPhoto = user.photoURL || 'https://via.placeholder.com/40';
                    
                    if (db) {
                        try {
                            const profileRef = doc(db, 'artifacts', appId, 'users', user.uid, 'profile', 'info');
                            const docSnap = await getDoc(profileRef);
                            
                            if (docSnap.exists()) {
                                appState.userName = docSnap.data().name;
                                updateUIWithUser();
                                ui.showPage('homePage');
                                renderLeaderboard();
                            } else {
                                ui.get('onboardNameInput').value = user.displayName || '';
                                ui.showPage('setNamePage');
                            }
                        } catch (e) {
                            console.error("Gagal menarik profil", e);
                            ui.showPage('setNamePage');
                        }
                    }
                } else {
                    currentUser = null;
                    ui.get('welcomeUser').style.display = 'none';
                    ui.get('headerProfilePic').style.display = 'none';
                    ui.showPage('landingPage');
                }
            });
        } else {
            setTimeout(() => {
                ui.get('splashScreen').classList.add('hidden');
                if (appState.userName && appState.userName !== 'Pemain Anonim') {
                    updateUIWithUser();
                    ui.showPage('homePage');
                } else {
                    ui.showPage('landingPage');
                }
            }, 1000);
        }
    }

    // --- LOGIKA SIMPAN PROFIL ---
    async function saveUserProfile(newName) {
        if (!db || !currentUser) {
            appState.userName = newName;
            saveLocalState();
            updateUIWithUser();
            ui.showPage('homePage');
            return;
        }

        try {
            const profileRef = doc(db, 'artifacts', appId, 'users', currentUser.uid, 'profile', 'info');
            await setDoc(profileRef, {
                name: newName,
                updatedAt: new Date().toISOString()
            });
            
            appState.userName = newName;
            updateUIWithUser();
            syncScoreToFirebase();
            ui.showPage('homePage');
            renderLeaderboard();
            showNotif("Nama profil berhasil disimpan!");
        } catch (e) {
            console.error("Gagal simpan profil:", e);
            showNotif("Gagal menyimpan nama profil.");
        }
    }

    // --- FITUR FIREBASE: LEADERBOARD ---
    async function renderLeaderboard() {
        const boardEl = ui.get('leaderboard');
        if (!db) { boardEl.innerHTML = '<p class="small">Mode Offline (Data Lokal).</p>'; return; }

        try {
            const colRef = collection(db, 'artifacts', appId, 'public', 'data', 'leaderboard');
            const snapshot = await getDocs(colRef);
            let data = [];
            
            snapshot.forEach(doc => { data.push(doc.data()); });

            data.sort((a, b) => b.score - a.score);
            data = data.slice(0, 20);

            boardEl.innerHTML = '';
            if (data.length === 0) {
                boardEl.innerHTML = '<p class="small">Belum ada data.</p>';
                return;
            }
            
            const emojis = ['ü•á', 'ü•à', 'ü•â'];
            data.forEach((entry, idx) => {
                const div = document.createElement('div');
                const isMe = entry.uid === (currentUser?.uid);
                div.className = `leaderboard-entry small ${isMe ? 'current-user' : ''}`;
                
                const rank = emojis[idx] || `${idx + 1}.`;
                div.innerHTML = `
                    <div style="display:flex; align-items:center; gap:8px;">
                        <span>${rank}</span>
                        <strong>${entry.name}</strong>
                    </div>
                    <span>${entry.score} pts</span>
                `;
                boardEl.appendChild(div);
            });
        } catch (e) {
            console.error("Leaderboard Error:", e);
        }
    }

    async function syncScoreToFirebase() {
        if (!db || !currentUser || !appState.userName) return;
        try {
            await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'leaderboard', currentUser.uid), {
                uid: currentUser.uid,
                name: appState.userName,
                score: appState.points,
                lastUpdated: new Date().toISOString()
            });
            renderLeaderboard();
        } catch (e) { console.error("Sync Error:", e); }
    }

    // --- FITUR FIREBASE: FEEDBACK ---
    async function submitFeedback() {
        const txt = ui.get('feedbackText').value.trim();
        const rating = appState.currentRating;
        const btn = ui.get('submitFeedback');

        if (!appState.userName || appState.userName === 'Pemain Anonim') { showNotif("Login terlebih dahulu."); return; }
        if (rating === 0) { showNotif("Beri minimal 1 bintang."); return; }

        btn.disabled = true;
        btn.innerHTML = "<span>Mengirim...</span>";

        if (db) {
            try {
                await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'feedback'), {
                    user: appState.userName,
                    rating: rating,
                    message: txt,
                    timestamp: new Date().toISOString()
                });
                showNotif("Feedback terkirim ke server!");
            } catch (e) {
                console.error("Feedback Error:", e);
                showNotif("Gagal kirim (koneksi error).");
            }
        } else {
            showNotif("Disimpan lokal (Offline).");
        }

        setTimeout(() => {
            ui.get('feedbackThanks').style.display = 'block';
            appState.currentRating = 0;
            ui.get('feedbackText').value = '';
            document.querySelectorAll('.star').forEach(s => { s.textContent = '‚òÜ'; s.classList.remove('selected'); });
            
            setTimeout(() => {
                ui.get('feedbackThanks').style.display = 'none';
                btn.disabled = false;
                btn.innerHTML = '<span>Kirim Feedback</span>';
            }, 2000);
        }, 1000);
    }

    // --- LOGIKA LOKAL (Quiz, Timer, dll) ---
    function loadLocalState() {
        const saved = localStorage.getItem('barbar_v4');
        if (saved) {
            const p = JSON.parse(saved);
            appState.points = p.points || 0;
            appState.completed = p.completed || {};
            appState.userName = p.userName || '';
        }
    }
    function saveLocalState() {
        localStorage.setItem('barbar_v4', JSON.stringify({
            points: appState.points,
            completed: appState.completed,
            userName: appState.userName
        }));
        updateStatsUI();
    }
    function updateStatsUI() {
        ui.get('totalPoints').innerText = appState.points;
        ui.get('doneTopics').innerText = Object.keys(appState.completed).length;
        syncScoreToFirebase();
    }

    function renderSubjects() {
        const grid = ui.get('subjectGrid');
        grid.innerHTML = '';
        Object.keys(appState.subjects).forEach(sub => {
            const div = document.createElement('a');
            div.className = 'selection-card'; div.href="#";
            div.innerHTML = `<h4>${sub}</h4><p>${appState.subjects[sub].length} Topik</p>`;
            div.onclick = (e) => {
                e.preventDefault();
                appState.currentSubject = sub;
                renderTopics(sub);
                ui.showPage('topicSelectionPage');
            }
            grid.appendChild(div);
        });
    }

    function renderTopics(sub) {
        ui.get('topicSelectionTitle').innerText = `Topik: ${sub}`;
        const grid = ui.get('topicGrid');
        grid.innerHTML = '';
        appState.subjects[sub].forEach((t, idx) => {
            const div = document.createElement('a');
            div.className = 'selection-card'; div.href="#";
            const done = appState.completed[t.id] ? '‚úÖ' : '';
            div.innerHTML = `<h4>${t.title} ${done}</h4><p>${t.description}</p>`;
            div.onclick = (e) => {
                e.preventDefault();
                loadTopic(idx);
            }
            grid.appendChild(div);
        });
    }

    function loadTopic(idx) {
        appState.currentTopicIndex = idx;
        const t = appState.subjects[appState.currentSubject][idx];
        ui.get('topicTitle').innerText = t.title;
        const v = ui.get('topicVideo');
        v.querySelector('source').src = t.video;
        v.load();
        
        ui.get('quizArea').style.display = 'none';
        ui.get('startSession').style.display = 'inline-block';
        ui.get('startSession').disabled = false;
        ui.get('startSession').textContent = "Mulai Sesi";
        
        ui.showPage('appPage');
    }

    function startSession() {
        const btn = ui.get('startSession');
        btn.textContent = "Sesi Berjalan"; btn.disabled = true;
        
        ui.get('topicVideo').play().catch(()=>{});
        
        const t = appState.subjects[appState.currentSubject][appState.currentTopicIndex];
        appState.quizQueue = JSON.parse(JSON.stringify(t.questions)); 
        
        ui.get('quizArea').style.display = 'block';
        renderNextQuestion();
        
        let sec = 300;
        if (appState.timerHandle) clearInterval(appState.timerHandle);
        appState.timerHandle = setInterval(() => {
            sec--;
            const m = Math.floor(sec/60).toString().padStart(2,'0');
            const s = (sec%60).toString().padStart(2,'0');
            ui.get('sessTimer').innerText = `${m}:${s}`;
            if (sec<=0) clearInterval(appState.timerHandle);
        }, 1000);
    }

    function renderNextQuestion() {
        const wrap = ui.get('questionWrap');
        wrap.innerHTML = '';
        if (appState.quizQueue.length === 0) {
            finishTopic();
            return;
        }
        const q = appState.quizQueue[0];
        wrap.innerHTML = `<p class="question-text">${q.q}</p>`;
        
        const optsDiv = document.createElement('div');
        optsDiv.className = 'options';
        optsDiv.style.display='flex'; optsDiv.style.flexDirection='column'; optsDiv.style.gap='8px'; optsDiv.style.marginTop='16px';
        
        q.opts.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'btn option';
            btn.innerText = opt;
            btn.onclick = () => {
                optsDiv.querySelectorAll('button').forEach(b => b.disabled=true);
                if (idx === q.a) {
                    btn.classList.add('correct');
                    appState.quizQueue.shift();
                    appState.points += 10;
                } else {
                    btn.classList.add('wrong');
                    appState.quizQueue.push(appState.quizQueue.shift());
                    showNotif("Kurang tepat, coba lagi nanti!");
                }
                saveLocalState();
                setTimeout(renderNextQuestion, 1000);
            }
            optsDiv.appendChild(btn);
        });
        wrap.appendChild(optsDiv);
        ui.get('remainingQ').innerText = appState.quizQueue.length;
    }

    function finishTopic() {
        const wrap = ui.get('questionWrap');
        wrap.innerHTML = '<p class="small" style="text-align:center;">üéâ Topik Selesai!</p>';
        ui.get('endSession').style.display = 'block';
        const tId = appState.subjects[appState.currentSubject][appState.currentTopicIndex].id;
        if(!appState.completed[tId]) {
            appState.points += 50; 
            appState.completed[tId] = true;
            if(window.confetti) confetti();
        }
        saveLocalState();
    }

    // --- EVENT LISTENERS LENGKAP ---
    function setupEventListeners() {
        
        ui.get('loginGoogleBtn').onclick = async () => {
            if (!auth) { showNotif("Sistem Offline."); return; }
            try { await signInWithPopup(auth, provider); } 
            catch (error) { showNotif("Gagal Login: " + error.message); }
        };

        ui.get('saveOnboardNameBtn').onclick = () => {
            const name = ui.get('onboardNameInput').value.trim();
            if(name.length < 3) { showNotif("Nama minimal 3 karakter"); return; }
            saveUserProfile(name);
        };

        ui.get('headerProfilePic').onclick = () => {
            ui.get('modalProfilePic').src = appState.userPhoto;
            ui.get('editNameInput').value = appState.userName;
            ui.get('profileModal').classList.add('show');
        };

        ui.get('closeProfileBtn').onclick = () => ui.get('profileModal').classList.remove('show');

        ui.get('saveProfileBtn').onclick = () => {
            const newName = ui.get('editNameInput').value.trim();
            if(newName.length < 3) { showNotif("Nama minimal 3 karakter"); return; }
            
            ui.get('saveProfileBtn').textContent = "Menyimpan...";
            saveUserProfile(newName).then(() => {
                ui.get('saveProfileBtn').textContent = "Simpan";
                ui.get('profileModal').classList.remove('show');
            });
        };

        ui.get('logoutBtn').onclick = async (e) => {
            e.preventDefault();
            if(auth) {
                await signOut(auth);
                appState.points = 0; appState.completed = {}; appState.userName = '';
                ui.get('sidebar').classList.remove('open');
                ui.get('hamburgerBtn').classList.remove('is-active');
                showNotif("Anda berhasil keluar.");
            }
        };

        ui.get('hamburgerBtn').onclick = () => {
            ui.get('sidebar').classList.toggle('open');
            ui.get('hamburgerBtn').classList.toggle('is-active');
        };
        
        ui.get('sidebarOverlay').onclick = () => {
            ui.get('sidebar').classList.remove('open');
            ui.get('hamburgerBtn').classList.remove('is-active');
        };
        
        ui.getAll('.nav-link').forEach(l => {
            if(l.id === 'fiturTambahanBtn' || l.id === 'logoutBtn') return;
            l.onclick = (e) => {
                if(l.target === "_blank") return;
                e.preventDefault();
                ui.showPage(l.dataset.page);
            }
        });

        ui.get('backToSubjectsBtn').onclick = (e) => { e.preventDefault(); renderSubjects(); ui.showPage('subjectSelectionPage'); };
        ui.get('startSession').onclick = startSession;
        ui.get('endSession').onclick = () => { ui.get('quizArea').style.display = 'none'; ui.get('startSession').textContent = "Ulangi Sesi"; ui.get('startSession').disabled = false; };
        
        ui.get('sendMentor').onclick = () => {
            const inp = ui.get('mentorInput'); const txt = inp.value.trim(); if(!txt) return;
            const log = ui.get('mentorLog');
            log.innerHTML += `<div class="msg user">${txt}</div>`; inp.value = '';
            setTimeout(() => {
                log.innerHTML += `<div class="msg ai">Sistem AI sedang dalam pemeliharaan.</div>`;
                log.scrollTop = log.scrollHeight;
            }, 800);
        };
        
        ui.get('submitFeedback').onclick = submitFeedback;
    }

    function setupStarRating() { /* Logika Bintang Tetap Sama */ }

    function showNotif(msg) {
        const n = ui.get('notification');
        n.textContent = msg; n.classList.add('show');
        setTimeout(() => n.classList.remove('show'), 2000);
    }

    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
